---
keyword: [节点管理, 添加节点]
---

# 添加已有节点

您可以通过ACK控制台将已有的ECS实例添加到已创建的Kubernetes集群中，目前仅支持添加Worker节点。本文介绍自动添加节点和手动添加节点两种方式。

-   [创建Kubernetes托管版集群](/cn.zh-CN/Kubernetes集群用户指南/集群/创建集群/创建Kubernetes托管版集群.md)。
-   您需要将待添加的ECS实例添加到Kubernetes集群自动创建的Worker节点安全组里。

**说明：**

您使用集群前，请注意以下限制：

-   默认情况下，每个集群中最多可包含100个节点。如果您需要添加更多节点，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)。
-   添加的云服务器必须与集群在同一地域同一VPC下。
-   添加已有云服务器时，请确保您的云服务器有EIP （专有网络），或者相应VPC已经配置了NAT网关。总之，需要确保相应节点能正常访问公网，否则，添加云服务器会失败。
-   ACK仅支持添加同一账号下云服务器。
-   ACK支持添加以下操作系统的节点：
    -   Alibaba Cloud Linux 2
    -   CentOS 7.x（暂不支持CentOS 8.x及以上的操作系统）
    -   Windows Server 2019和Windows Server Core，1909

## 自动添加节点

自动添加节点方式会列出当前账号下可用的ECS云服务器，在Web界面进行安装部署，并自动添加到集群。

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**集群**。

3.  支持以下3种方式进入添加现有云服务器页面。

    -   通过单击目标集群右侧**更多**进入**添加现有云服务器**页面。
        1.  在集群列表页面中，单击目标集群右侧**操作**列下的**更多**。
        2.  在**更多**下拉列表中单击**添加已有节点**。
    -   通过单击目标集群右侧**节点池**进入**添加现有云服务器**页面。
        1.  在集群列表页面中，单击目标集群右侧**操作**列下的**节点池**。
        2.  在节点池页面的**操作**列下单击**添加已有节点**。
    -   通过单击目标集群右侧**应用管理**进入**添加现有云服务器**页面。
        1.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**应用管理**。
        2.  在集群管理页左侧导航栏中，选择**节点管理** \> **节点**。
        3.  在**节点**页面中，单击**添加已有节点**。
4.  在**选择已有云服务器实例**配置项页面，选择自动添加已有云服务器实例。

    选择**添加方式**为**自动添加**，在已有云服务器的列表中，选择所需的ECS云服务器。

5.  单击**下一步**，完成**填写实例信息**。

    |配置项|参数|
    |---|--|
    |**容器运行时**|选择为节点配置的容器运行时，如Docker、安全沙箱容器等。|
    |**系统镜像**|选择节点使用的操作系统类型版本。|
    |**自定义镜像**|选择自定义镜像时，将取代默认系统镜像。|
    |**数据盘挂载**|设置是否将容器和镜像存储在数据盘。    -   如果ECS已挂载数据盘，且最后一块数据盘的文件系统未初始化，系统会自动将该数据盘格式化为ext4，用来存放内容/var/lib/docker、/var/lib/kubelet。

**说明：** 数据盘内原有数据将丢失，请注意备份数据。

    -   如果ECS未挂载数据盘，则不会挂载新的数据盘。 |
    |**CPU Policy**|设置CPU Policy。    -   none：默认策略，表示启用现有的默认CPU亲和方案。
    -   static：允许为节点上具有某些资源特征的Pod赋予增强的CPU亲和性和独占性。 |
    |**登录方式**|    -   设置密钥

设置密钥对作为登录节点的凭证。

    -   设置密码

设置节点的登录密码和确认密码。 |
    |**RDS白名单**|选择想要添加白名单的RDS实例。|
    |**标签**|为集群绑定标签。输入键和对应的值，单击**添加**。

**说明：**

    -   键是必需的，而值是可选的，可以不填写。
    -   键不能是aliyun、http:// 、https://开头的字符串，不区分大小写，最多64个字符。
    -   值不能是http://或https://，可以为空，不区分大小写，最多128个字符。
    -   同一个资源，标签键不能重复，相同标签键（Key）的标签会被覆盖。
    -   如果一个资源已经绑定了20个标签，已有标签和新建标签会失效，您需要解绑部分标签后才能再绑定新的标签。 |
    |**保留实例名称**|添加节点时，默认开启**保留实例名称**。如果您不需要保留实例名称，您可以关闭**保留实例名称**，此时会按照自定义节点名称指定的规则来重命名节点。|
    |**实例自定义数据**|请参见[生成实例自定义数据](/cn.zh-CN/实例/管理实例/使用实例自定义数据/生成实例自定义数据.md)。|

6.  单击**下一步**，在弹出的窗口中单击**确定**。


## 手动添加节点

**说明：** 手动添加到ACK集群的ECS节点不会随集群删除而被释放。

手动添加节点方式要求您获取安装命令，登录到对应ECS云服务器上进行安装，每次只能添加一个ECS云服务器。

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**集群**。

3.  支持以下3种方式进入添加现有云服务器页面。

    -   通过单击目标集群右侧**更多**进入**添加现有云服务器**页面。
        1.  在集群列表页面中，单击目标集群右侧**操作**列下的**更多**。
        2.  在**更多**下拉列表中单击**添加已有节点**。
    -   通过单击目标集群右侧**节点池**进入**添加现有云服务器**页面。
        1.  在集群列表页面中，单击目标集群右侧**操作**列下的**节点池**。
        2.  在节点池页面的**操作**列下单击**添加已有节点**。
    -   通过单击目标集群右侧**应用管理**进入**添加现有云服务器**页面。
        1.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**应用管理**。
        2.  在集群管理页左侧导航栏中，选择**节点管理** \> **节点**。
        3.  在**节点**页面中，单击**添加已有节点**。
4.  在**选择已有云服务器实例**配置项页面，选择手动添加已有云服务器实例。

    选择**添加方式**为**手动添加**，在已有云服务器的列表中，选择所需的ECS云服务器，

5.  单击**下一步**，完成**填写实例信息**。

    |配置项|参数|
    |---|--|
    |**数据盘挂载**|设置是否将容器和镜像存储在数据盘。    -   如果ECS已挂载数据盘，且最后一块数据盘的文件系统未初始化，系统会自动将该数据盘格式化为ext4，用来存放内容/var/lib/docker、/var/lib/kubelet。

**说明：** 数据盘内原有数据将丢失，请注意备份数据。

    -   如果ECS未挂载数据盘，则不会挂载新的数据盘。 |
    |**RDS白名单**|选择想要添加白名单的RDS实例。|
    |**保留实例名称**|添加节点时，默认开启**保留实例名称**。如果您不需要保留实例名称，您可以关闭**保留实例名称**，此时会按照自定义节点名称指定的规则来重命名节点。|

6.  单击**下一步**，进入添加完成页面。在添加完成页面复制执行命令，单击**完成**。

7.  登录[ECS管理控制台](https://ecs.console.aliyun.com/)，单击左侧导航栏中的**实例**，选择集群所在的地域，选择需要添加的ECS实例。

8.  单击ECS实例右侧的**远程连接**。进入ECS实例远程连接界面，根据页面指导，输入远程连接密码并单击**确定**，成功后，输入步骤7保存的命令，单击**确定**，开始执行脚本。

    等待脚本执行成功，该云服务器即添加成功。


您可以在集群列表页面单击集群名称，然后单击**节点管理**，进入节点管理页面，可查看到刚才添加的节点信息。

