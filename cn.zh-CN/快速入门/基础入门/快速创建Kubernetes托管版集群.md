---
keyword: [kubernetes, k8s, 创建]
---

# 快速创建Kubernetes托管版集群

本文以托管版Kubernetes集群为例，介绍如何使用控制台快速创建Kubernetes集群。

-   在使用容器服务Kubernetes版前，您需要完成授权操作。具体操作步骤，请参见[首次使用容器服务Kubernetes版](/cn.zh-CN/快速入门/首次使用容器服务Kubernetes版.md)。
-   登录[RAM 管理控制台](https://ram.console.aliyun.com/)开通相应服务。
-   [开通弹性伸缩服务]()。

本示例将演示如何快速创建一个Kubernetes集群，部分配置采用默认或最简配置。

有关集群的使用限制和说明，请参见[创建Kubernetes托管版集群](/cn.zh-CN/Kubernetes集群用户指南/集群/创建集群/创建Kubernetes托管版集群.md)。

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，单击**集群**。

3.  在集群列表页面中，单击页面右上角的**创建集群**。

4.  配置集群参数。

    本文中大多数配置保留默认值，具体的配置如下。

    1.  完成**集群配置**。

        |参数|描述|
        |--|--|
        |**集群名称**|填写集群的名称。

**说明：** 集群名称应包含1~63个字符，可包含数字、汉字、英文字符或短划线（-）。 |
        |**集群规格**|选择集群规格，支持**标准版**和**Pro版**。 |
        |**地域**|选择集群所在的地域。 |
        |**资源组**|将鼠标悬浮于页面上方的**账号全部资源**，选择集群所在的资源组。这里显示选择的资源组。

![资源组](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0706659951/p127165.png)

本文默认选择**账号全部资源**。 |
        |**Kubernetes版本**|使用默认的版本。 |
        |容器运行时

|使用Docker运行时。有关Docker运行时、Containerd运行时、和安全沙箱运行时的区别，请参见[如何选择Docker运行时、Containerd运行时、或者安全沙箱运行时？](/cn.zh-CN/Kubernetes集群用户指南/安全沙箱/如何选择Docker运行时、Containerd运行时、或者安全沙箱运行时？.md)。 |
        |**专有网络**|设置集群的网络。

设置集群的网络，您可以选择普通VPC和共享VPC。

        -   共享VPC：VPC的所有者账号（资源所有者）可以将其账号下的VPC内的交换机资源共享给其组织内的其他账号使用。
        -   普通VPC：不具备共享功能的VPC。
**说明：** Kubernetes集群仅支持专有网络。您可以在已有VPC列表中选择所需的VPC。如果没有您需要的专有网络，可以通过单击**创建专有网络**进行创建，请参见[使用专有网络](/cn.zh-CN/专有网络和交换机/使用专有网络.md)。 |
        |**虚拟交换机**|设置虚拟交换机。

您可以在已有虚拟交换机列表中，根据**可用区**选择1~3个交换机。如果没有您需要的交换机，可以通过单击**创建虚拟交换机**进行创建，请参见[创建交换机](/cn.zh-CN/专有网络和交换机/使用交换机.md)。 |
        |**网络插件**|默认选择Flannel。有关Flannel和Terway的详情，请参见[t64408.md\#section\_k1z\_f1n\_lmh](/cn.zh-CN/Kubernetes集群用户指南/网络/容器网络CNI/使用Terway网络插件.md)。 |
        |**节点IP数量**|默认选择64。

如果您选择的网络模式为**Flannel**，您需设置**节点IP数量**。

**说明：**

        -   **节点IP数量**是指可分配给一个节点的IP数量，建议保持默认值。
        -   根据您所选择的专有网络和节点IP数量，ACK将为您推荐可用的Pod网络CIDR和Service CIDR，并给出相应配置下集群内可允许部署的主机数量以及每台主机可容纳的Pod数量。请您根据集群规模的实际需求，在推荐配置的基础上进行修改。 |
        |**Pod网络CIDR**|网络插件选择**Flannel**时，需要配置**Pod网络CIDR**。

**Pod网络CIDR**指定Flannel网络插件需要配置Pod网络CIDR，网段不能和VPC及VPC已有Kubernetes集群使用的网段重复，创建成功后不能修改。而且Service地址段不能和Pod地址段重复，有关Kubernetes网络地址段规划的信息，请参见[Kubernetes集群网络规划](/cn.zh-CN/Kubernetes集群用户指南/网络/Kubernetes集群网络规划.md)。 |
        |**Service CIDR**|设置**Service CIDR**。您需要指定**Service CIDR**，网段不能与VPC及VPC内已有Kubernetes集群使用的网段重复，创建成功后不能修改。而且Service地址段也不能和Pod地址段重复，有关Kubernetes网络地址段规划的信息，请参见[Kubernetes集群网络规划](/cn.zh-CN/Kubernetes集群用户指南/网络/Kubernetes集群网络规划.md)。 |
        |**配置SNAT**|默认选中**为专有网络配置SNAT网关**。

创建集群时，默认不开通公网。如果您选择的VPC不具备公网访问能力，选中**为专有网络配置SNAT**后，ACK将为您创建NAT网关并自动配置SNAT规则。 |
        |**API Server访问**|ACK默认为API Server创建一个内网SLB实例，您可修改SLB实例规格。更多信息，请参见[实例规格](/cn.zh-CN/传统型负载均衡CLB/CLB用户指南/实例/实例概述.md)。

**说明：** 删除默认创建的SLB实例将会导致无法访问API Server。

本文默认不选中**使用EIP暴露API Server**。

您可设置是否开放**使用EIP暴露API Server**。API Server提供了各类资源对象（Pod，Service等）的增删改查及Watch等HTTP Rest接口。

        -   如果选择开放，ACK会创建一个EIP，并挂载到公网SLB上。此时，Master节点的6443端口（对应API Server）暴露出来，您可以在外网通过kubeconfig连接并操作集群。
        -   如果选择不开放，则不会创建EIP，您只能在VPC内部用kubeconfig连接并操作集群。 |
        |**RDS白名单**|设置RDS白名单。将节点IP添加到RDS实例的白名单中。

**说明：** 允许白名单RDS访问Kubernetes集群，RDS必须在当前集群的VPC内。

默认不设置。 |
        |**安全组**|支持选择**自动创建普通安全组**、**自动创建企业级安全组**、**选择已有安全组**。有关安全组的详细内容，请参见[安全组概述](/cn.zh-CN/安全/安全组/安全组概述.md)。

本文默认选择**自动创建企业级安全组**。 |
        |高级配置项

|本文默认不配置集群的高级参数。有关集群的高级配置项详情，请参见[集群高级选项配置](/cn.zh-CN/Kubernetes集群用户指南/集群/创建集群/创建Kubernetes托管版集群.md)。|

    2.  单击**下一步：Worker配置**，并完成**Worker配置**。

        |参数|描述|
        |--|--|
        |Worker实例

|设置是否使用已有ECS实例或者购买ECS实例。默认选择**新增实例**。 |
        |**付费类型**|默认选择**按量付费**，支持**按量付费**和**包年包月**两种节点付费类型。 |
        |**实例规格**|支持选择多个实例规格。详情请参见[实例规格族](/cn.zh-CN/实例/实例规格族.md)。 |
        |**已选规格**|呈现选中的规格。 |
        |**数量**|新增Worker实例（ECS实例）的数量。 |
        |**系统盘**|默认选择**高效云盘**、**120 GiB**的存储空间。|
        |**挂载数据盘**|默认不挂载。

支持**ESSD云盘**、**SSD云盘**和**高效云盘**。挂载数据盘时，支持云盘**加密**和**开启云盘备份**。 |
        |**操作系统**|默认选择Alibaba Cloud Linux 2.1903。|
        |**登录方式**|        -   设置密钥。
            -   **密钥对**：如您已经创建密钥对，在下拉列表中选择目标密钥对。
            -   **新建密钥对**：此项用于您还未创建密钥对。创建密钥对，请参见[创建SSH密钥对](/cn.zh-CN/安全/SSH密钥对/使用SSH密钥对/创建SSH密钥对.md)。密钥对创建完毕后，设置该密钥对作为登录集群的凭据。
        -   设置密码。
            -   **登录密码**：设置节点的登录密码。
            -   **确认密码**：确认设置的节点登录密码。 |
        |Worker节点高级配置项

|本文默认不配置集群的高级参数。有关集群的高级配置项详情，请参见[集群高级选项配置](/cn.zh-CN/Kubernetes集群用户指南/集群/创建集群/创建Kubernetes托管版集群.md)。|

    3.  单击**下一步：组件配置**，并完成**组件配置**。

        |参数|描述|
        |--|--|
        |**Ingress**|默认选中**安装Ingress组件**，**负载均衡类型**选择**公网**。 |
        |**存储插件**|默认选择**CSI**。有关Flexvolume和CSI存储插件的详情，请参见[存储CSI概述](/cn.zh-CN/Kubernetes集群用户指南/存储-CSI/存储CSI概述.md)。 |
        |**监控插件**|设置是否启用云监控插件。默认选中**在ECS节点上安装云监控插件**和**使用Prometheus监控服务**，前者用于在云监控控制台查看所创建ECS实例的监控信息。

本文默认不安装云监控插件。 |
        |**日志服务**|设置是否启用日志服务，您可使用已有Project或新建一个Project。默认选中**使用日志服务**。创建应用时，您可通过简单配置，快速使用日志服务，详情参见[通过日志服务采集Kubernetes容器日志](/cn.zh-CN/Kubernetes集群用户指南/可观测性/日志管理/通过日志服务采集Kubernetes容器日志.md)。

默认选中**安装node-problem-detector并创建事件中心**。您可以选择是否在日志服务控制台中**创建Ingress Dashboard**。

本文默认使用日志服务。 |
        |**控制平面组件日志**|选中**开启**，将从ACK控制层收集托管集群控制平面组件日志到您账号中的SLS日志服务的Log Project中。更多信息，请参见[收集托管集群控制平面组件日志](/cn.zh-CN/Kubernetes集群用户指南/可观测性/日志管理/收集托管集群控制平面组件日志.md)。 |

    4.  单击**下一步：确认配置**。

    5.  选中并阅读**服务协议**，然后单击**创建集群**。

        **说明：** 一个包含多节点的Kubernetes集群的创建时间一般约为十分钟。


