---
keyword: [使用限制, 灰度发布]
---

# 使用限制

本文介绍通过阿里云容器服务的Ingress功能实现灰度发布的使用限制。

阿里云容器服务Kubernetes Ingress Controller的版本需要在`0.12.0-5`及以上，才支持灰度发布。

可执行以下命令查看Ingress Controller的当前版本号：

-   采用Deployment部署的情况：

    ```
    kubectl -n kube-system get deploy nginx-ingress-controller -o yaml | grep -v 'apiVersion' | grep 'aliyun-ingress-controller'
    ```

-   采用DaemonSet部署的情况：

    ```
    kubectl -n kube-system get ds nginx-ingress-controller -o yaml | grep -v 'apiVersion' | grep 'aliyun-ingress-controller'
    ```


若您的Ingress Controller的版本在`0.12.0-5`以下，可通过以下命令进行升级：

-   采用Deployment部署的情况：

    ```
    kubectl -n kube-system set image deploy/nginx-ingress-controller nginx-ingress-controller=registry.cn-hangzhou.aliyuncs.com/acs/aliyun-ingress-controller:0.12.0-5
    ```

-   采用DaemonSet部署的情况：

    ```
    kubectl -n kube-system set image ds/nginx-ingress-controller nginx-ingress-controller=registry.cn-hangzhou.aliyuncs.com/acs/aliyun-ingress-controller:0.12.0-5
    ```


