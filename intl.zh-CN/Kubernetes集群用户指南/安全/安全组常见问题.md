# 安全组常见问题

本文主要为您介绍安全组常见问题。

-   [为什么容器之间网络不通？](#section_7in_bdt_tfu)
-   [如何给Kubernetes集群指定安全组？](#section_y2v_i2p_x4f)

## 为什么容器之间网络不通？

下面为您介绍容器服务Kubernetes集群由于安全组导致网络不通的问题原因及解决方法。

-   入方向**授权对象**为**Pod 网络CIDR**，且**协议类型**为**全部**的规则被删除。
    1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。
    2.  在控制台左侧导航栏中，单击**集群**。
    3.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**详情**。
    4.  选择**集群资源**页签，单击**虚拟专有网络 VPC**。

        ![虚拟专有网络](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2712207161/p148432.png)

    5.  在资源管理页签，单击**安全组**下的数字。
    6.  单击目标安全组**操作列**的**配置规则**。
    7.  在入方向页面，单击**手动添加**。
    8.  填写**协议类型**、**端口范围**、**授权对象**，并单击**保存**。

        **说明：**

        -   **协议类型**请选择**全部**。
        -   **授权对象**填写为Pod的网段地址。

            Pod的网段地址（Pod网络CIDR）可在容器服务管理控制台集群详细信息页面，集群信息区域查看。

            ![集群信息](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5195659951/p37009.png)

            **授权对象**的设置，可参见[安全组应用案例ECS安全组配置操作指南](/intl.zh-CN/安全/安全组/安全组应用案例.md)。

        入方向**授权对象**为**Pod网络CIDR**，且**协议类型**为**全部**的规则已添加。

        ![入方向](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5195659951/p148458.png)

-   新增ECS实例的安全组与集群所在的安全组不同。

    1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。
    2.  在控制台左侧导航栏中，单击**集群**。
    3.  在集群列表页面中，单击目标集群名称或者目标集群右侧**操作**列下的**详情**。
    4.  选择**集群资源**页签，单击**虚拟专有网络 VPC**。

        ![虚拟专有网络](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2712207161/p148432.png)

    5.  在专有网络详情页面，单击资源管理页签**安全组**下的数字，跳转到云服务器ECS管理控制台的安全组列表页面查看安全组的详细信息。
    6.  在安全组列表页面，查看安全组的名称。

        ![安全组列表](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5195659951/p37012.png)

    7.  在云服务器ECS管理控制台，选择左侧导航栏**实例与镜像** \> **实例**。
    8.  在实例列表页面，单击目标实例的**操作**列的**更多** \> **网络和安全组** \> **加入安全组**，进入ECS实例加入安全组页面。

        ![实例列表](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5195659951/p37135.png)

    9.  单击**安全组**复选框右侧的下拉箭头，输入步骤6查询到的集群安全组名称。

        ![ECS实例加入安全组](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5195659951/p37136.png)

    10. 单击**确定**。
    执行结果：

    1.  在云服务器管理控制台左侧导航栏，选择**实例与镜像** \> **实例**，在实例列表页面，单击目标实例的名称。
    2.  在安全组列表区域，可看到ECS实例已加入集群所在的安全组。

        ![安全组列表](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5195659951/p37607.png)


## 如何给Kubernetes集群指定安全组？

当前暂不支持给Kubernetes集群指定安全组。但是创建Kubernetes集群时，容器服务ACK会自动创建一个默认安全组，您可以通过修改默认安全组的规则，达到指定安全组的效果。

