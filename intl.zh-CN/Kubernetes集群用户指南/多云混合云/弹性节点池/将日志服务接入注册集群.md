---
keyword: [注册的集群, 多集群, 容器服务接入日志服务]
---

# 将日志服务接入注册集群

注册的集群接入日志服务能为分布在各处的Kubernetes集群提供统一的管理方式。本文介绍如何通过容器服务Kubernetes版中的应用将日志服务接入至注册的Kubernetes集群。

您已通过容器服务Kubernetes版接入一个注册的Kubernetes集群。具体操作步骤，请参见[创建注册集群并接入本地数据中心集群](/intl.zh-CN/Kubernetes集群用户指南/多云混合云/注册集群管理/创建注册集群并接入本地数据中心集群.md)。

1.  登录[容器服务管理控制台](https://cs.console.aliyun.com)。

2.  在控制台左侧导航栏中，选择**市场** \> **应用目录**。

3.  在**应用目录**页面单击**阿里云应用**页签，然后选中**ack-sls-logtail**应用。

    **阿里云应用**包含较多应用，您可在页面右上角搜索**ack-sls-logtail**，支持关键字搜索。

4.  在**应用目录 - ack-sls-logtail**页面右侧的**创建**区域，填写相关信息。

    -   **集群**：选择目标集群。资源对象将部署在该集群内。
    -   **命名空间**：选择资源对象所属的命名空间，默认是default。除了节点、持久化存储卷等底层计算资源以外，大多数资源对象需要作用于命名空间。
    -   **发布名称**：填写资源对象的发布名称。
5.  在**应用目录 - ack-sls-logtail**页面单击**参数**页签，设置相应的参数。

    ![日志服务 参数](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8206659951/p76771.png)

    |参数|描述|
    |--|--|
    |**AccessKeyId**|您的阿里云AccessKey ID。AK权限需包含访问ARMS的权限。|
    |**AccessKeySecret**|您的阿里云AccessKey Secret。|


应用创建后，您可以通过该集群的控制台运行以下YAML文件验证日志服务是否可用。

```
apiVersion: v1
kind: Pod
metadata:
  name: my-demo
spec:
  containers:
  - name: my-demo-app
    image: 'registry.cn-hangzhou.aliyuncs.com/log-service/docker-log-test:latest'
    env:
    ######### 配置 环境变量 ###########
    - name: aliyun_logs_log-stdout
      value: stdout
    - name: aliyun_logs_log-varlog
      value: /var/log/*.log
    - name: aliyun_logs_mytag1_tags
      value: tag1=v1
    ###############################
    ######### 配置vulume mount ###########
    volumeMounts:
    - name: volumn-sls-mydemo
      mountPath: /var/log
  volumes:
  - name: volumn-sls-mydemo
    emptyDir: {}
  ###############################
```

如果日志服务对应的project下面有log-stdou和log-varlog两个logstore，和对应的日志内容，则日志服务可用。

**说明：** 日志展示会有一定延迟。

如您的集群中有部署Ingress-nginx，可参见[Ingress访问日志分析与监控](/intl.zh-CN/Kubernetes集群用户指南/网络/Ingress管理/Ingress访问日志分析与监控.md)。

**相关文档**  


[注册集群概述](/intl.zh-CN/Kubernetes集群用户指南/多云混合云/注册集群管理/注册集群概述.md)

